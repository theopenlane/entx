{{/* The line below tells Intellij/GoLand to enable the autocompletion based *gen.Graph type. */}}
{{/* gotype: entgo.io/ent/entc/gen.Graph */}}

{{ define "historyClient" }}
// Code generated by entx.history, DO NOT EDIT.
	{{ $pkg := base $.Config.Package }}
	{{ template "header" $ }}

// withHistory adds the history hooks to the appropriate schemas - generated by entx.history
func (c *Client) WithHistory() {
	{{- range $n := $.Nodes }}
		{{- $name := $n.Name }}
		{{- $history := hasSuffix $name "History" }}
		{{- if $history }}
		{{- else }}
			{{- $include := or ( not $n.Annotations.History ) (eq $n.Annotations.History.Exclude false) }}
			{{- if $include }}
for _, hook := range history.Hooks[*{{ $name }}Mutation]() {
	c.{{ $name }}.Use(hook)
}
			{{- end }}
		{{- end }}
	{{- end }}
}

{{ end }}